<%=nested_form_for budget, validate: true, :html => { class: 'form-horizontal' } do |f| %>

    <div class="box-body">
      <div class="field col-md-12 form-group">
        <div class="field col-md-5 form-group">
          <div class="col-sm-2 alineado">
            <%= f.label :client_id,  'Cliente:', :class => 'control-label tooltip_required' %>
          </div>
          <div class="col-sm-8 ">
            <%= f.collection_select(:client_id, Client.all, :id, :name, {prompt: 'Seleccionar'}, :class => 'form-control') %>
          </div>
        </div>

        <div class="field col-md-4 form-group">
          <div class="col-sm-2 alineado">
            <%= f.label :date, 'Fecha:', :class => 'control-label' %>
          </div>
          <div class="col-sm-5">
            <%= f.text_field :date, :id => 'datepickerFrom', :class => 'input-group date form-control datepicker', :readonly => true %>
          </div>
        </div>

        <div class="field col-md-3 form-group ">
          <div class="col-sm-3 alineado">
            <%= f.label :utility, '% Utilidad:', :class => 'control-label' %>
          </div>
          <div class="col-sm-5">
            <%= f.text_field :utility, :class => 'form-control' %>
          </div>
        </div>
      </div>

      <div class="field col-md-12 form-group">
        <div class="field col-md-5 form-group ">
          <div class="col-sm-5 alineado">
            <%= f.label :description, 'Descripcion:', :class => 'control-label' %>
          </div>
          <div class="col-sm-8 ">
            <%= f.text_area :description, :class => 'form-control', cols: "30", rows: "5", :maxlength => 200 %>
          </div>
        </div>

        <div class="field col-md-5 form-group">
          <div class="col-sm-3 alineado">
            <%= f.label :state, 'Estado:', :class => 'control-label tooltip_required' %>
          </div>
          <div class="col-sm-6 ">
            <%= f.select(:state, ["Pendiente", "Aprobado"], {prompt: 'Seleccionar'}, :class => 'form-control') %>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-12">
      <div class="col-md-6">
        <div class="box  box-success">
          <div class=" box-body">
            <div class="col-sm-12">
              <table class="table table-bordered">
                <tr>
                  <th class="col-md-4">Servicio</th>
                  <th class="col-md-3">Cantidad</th>
                  <th class="col-md-3">Precio</th>
                </tr>
                <%= f.fields_for :budget_service_details, :wrapper => false do |form| %>
                    <tr class="fields col-md-12 form-group required">
                      <td class="col-md-5"><%=form.collection_select(:service_id, Service.all, :id, :name, {prompt: 'Seleccionar'}, class: 'form-control')%></td>
                      <td class="col-md-3"><%=form.number_field :service_quantity, class: 'form-control'%></td>
                      <td class="col-md-3"><%=form.number_field :service_price, class: 'form-control'%></td>
                      <td class="col-md-1"><%=form.link_to_remove '<i class="fa fa-trash"></i>'.html_safe, class: 'btn btn-danger'%></td>
                    </tr>
                <% end %>
              </table>
            </div>
          </div>

          <div class="box box-footer">
            <%=f.link_to_add 'Agregar Servicio', :budget_service_details, class: 'btn btn-success'%>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="box  box-success">
          <div class=" box-body">
            <div class="col-sm-12">
              <table class="table table-bordered">
                <tr>
                  <th class="col-md-4">Material</th>
                  <th class="col-md-3">Cantidad</th>
                  <th class="col-md-3">Precio</th>
                </tr>
                <%= f.fields_for :budget_material_details, :wrapper => false do |form| %>
                    <tr class="fields col-md-12 form-group required">
                      <td class="col-md-5"><%=form.collection_select(:material_id, Material.all, :id, :name, {prompt: 'Seleccionar'}, class: 'form-control')%></td>
                      <td class="col-md-3"><%=form.number_field :material_quantity, class: 'form-control'%></td>
                      <td class="col-md-3"><%=form.number_field :material_price, class: 'form-control'%></td>
                      <td class="col-md-1"><%=form.link_to_remove '<i class="fa fa-trash"></i>'.html_safe, class: 'btn btn-danger'%></td>
                    </tr>
                <% end %>
              </table>
            </div>
          </div>

          <div class="box box-footer">
            <%=f.link_to_add 'Agregar Material', :budget_material_details, class: 'btn btn-success'%>
          </div>
        </div>
      </div>

    </div>

    <div class="box-footer clearfix">
      <div class="pull-right">
        <%= f.submit 'Guardar', :class => "btn btn-flat bg-blue" %>
        <%= link_to 'Cancelar', materials_path, class: 'btn btn-flat btn-default' %>
      </div>
    </div>
    </div>
<%end%>

